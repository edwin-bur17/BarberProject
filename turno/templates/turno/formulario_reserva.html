{% extends "turno/base.html" %}

{% block title %}Formulario de reserva{% endblock %}

{% block extra_head %}
<style>
  .container {
    max-width: 1000px;
    margin: auto;
    display: flex;
    gap: 30px;
  }
  /* resto de CSS específico */
</style>
{% endblock %}

{% block content %}
<h2>
  Formulario de reserva{% if barbero %} con {{ barbero.nombre }}{% endif %}
</h2>

{% if error %}
<p style="color: red">{{ error }}</p>
{% endif %}

<div class="container">
  <form method="post">
    {% csrf_token %} {{ form.as_p }}
    <button type="button" onclick="abrirModal()">Reservar</button>
  </form>

  <div class="slots">
    <h3>Horarios disponibles hoy:</h3>
    <ul id="slot-list">
      {% for s in slots %}
      <li onclick="setTime('{{ s }}', this)">{{ s }}</li>
      {% empty %}
      <li>No hay</li>
      {% endfor %}
    </ul>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script>
  function setTime(slot, el) { /* ... */ }
  function abrirModal() { document.getElementById("modal-confirmacion").style.display = "block"; }
  function cerrarModal() { document.getElementById("modal-confirmacion").style.display = "none"; }
  function confirmarEnvio() { document.querySelector("form").submit(); }
</script>

<div id="modal-confirmacion" style="display:none; position:fixed;">
  <div style="background:#fff; padding:30px; max-width:400px; margin:100px auto;">
    <h3>¿Confirmar reserva?</h3>
    <p>¿Estás seguro de que deseas reservar este turno?</p>
    <button onclick="confirmarEnvio()">Confirmar</button>
    <button onclick="cerrarModal()">Cancelar</button>
  </div>
</div>
{% endblock %}
